<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>PokéAPI Flask</title>
</head>
<body>
    <h1>Consultá un Pokémon:</h1>
    <form id="pokemonForm">
        <input type="text" id="pokemonInput" placeholder="pikachu" />
        <button type="submit">Buscar</button>
    </form>

    <pre id="result"></pre>
    <img id="pokemonImage" src="" alt="" style="display:none; max-width:200px;"/>

    <script>
        const form = document.getElementById('pokemonForm');
        const result = document.getElementById('result');
        const image = document.getElementById('pokemonImage');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const pokemon = document.getElementById('pokemonInput').value.toLowerCase();

            try {
                const response = await fetch(`/api/pokemon/${pokemon}`);
                if (!response.ok) {
                    result.textContent = 'Pokémon no encontrado.';
                    image.style.display = 'none';
                    return;
                }
                const data = await response.json();

                // Mostrar JSON bonito
                result.textContent = JSON.stringify(data, null, 4);

                // Si el JSON tiene una propiedad 'imagen' o 'image' con URL, mostrar la imagen
                if (data.imagen || data.image) {
                    image.src = data.imagen || data.image;
                    image.alt = data.nombre || pokemon;
                    image.style.display = 'block';
                } else {
                    image.style.display = 'none';
                }
            } catch (error) {
                result.textContent = 'Error al consultar la API.';
                image.style.display = 'none';
            }
        });
    </script>
</body>
</html>



